# GitHub Copilot 自定义说明配置指南

> 本指南介绍如何配置 GitHub Copilot 自定义说明，让 AI 更好地理解和适应你的项目需求。

## 📋 目录

- [概述](#概述)
- [前置条件](#前置条件)
- [配置步骤](#配置步骤)
  - [全仓库通用说明](#全仓库通用说明)
  - [路径特定说明](#路径特定说明)
  - [编写说明内容](#编写说明内容)
- [高级功能](#高级功能)
  - [提示文件（Prompt Files）](#提示文件prompt-files)
- [验证与测试](#验证与测试)
- [最佳实践](#最佳实践)
- [功能对比](#功能对比)

---

## 概述

**GitHub Copilot 自定义说明** 是一种让 AI 更好理解项目的机制。通过在项目中创建特定的说明文件，可以为 Copilot 提供项目背景、编码规范、架构信息等上下文，从而获得更精准的代码建议。

### 🎯 核心价值

- **提升代码质量**：Copilot 能够遵循项目特定的编码规范
- **减少上下文切换**：AI 理解项目结构，无需反复解释
- **统一团队标准**：确保团队成员获得一致的 AI 建议

---

## 前置条件

### 必要条件

1. **GitHub 仓库**：需要一个可写入的 GitHub 项目
2. **VS Code 环境**：推荐使用 VS Code，功能支持最完整
3. **Copilot 订阅**：确保拥有有效的 GitHub Copilot 订阅

### 功能确认

1. 打开 VS Code 设置（`Ctrl+,` 或 `Cmd+,`）
2. 搜索 `instruction file`
3. 确保 **`Chat: Use Instruction Files`** 选项已启用（默认启用）

---

## 配置步骤

### 全仓库通用说明

这是最常用的配置方式，说明将应用到整个项目。

#### 文件配置

- **文件名**：`.github/copilot-instructions.md`
- **位置**：项目根目录下的 `.github` 文件夹
- **作用范围**：整个仓库的所有文件

#### 创建步骤

1. 在项目根目录创建 `.github` 文件夹（如不存在）
2. 在 `.github` 文件夹中创建 `copilot-instructions.md` 文件
3. 编写项目说明内容

#### 文件结构示例

```
your-project/
├── .github/
│   └── copilot-instructions.md  ← 全仓库说明文件
├── src/
├── docs/
└── package.json
```

### 路径特定说明

适用于大型项目，可为不同模块设置专门的规则。

#### 文件配置

- **文件名**：`<name>.instructions.md`
- **位置**：`.github/instructions/` 目录下
- **作用范围**：通过 `applyTo` 字段指定的文件路径

#### 创建步骤

1. 在 `.github` 文件夹中创建 `instructions` 子文件夹
2. 创建特定模块的说明文件，如 `frontend.instructions.md`
3. 在文件开头添加 frontmatter 配置

#### 配置示例

```markdown
---
applyTo: "src/**/*.{js,jsx,ts,tsx}"
---

# 前端代码专用规则

## 组件规范
- 必须使用函数式组件和 React Hooks
- 组件名称使用 PascalCase 命名

## 样式规范
- 使用 Tailwind CSS 类，避免内联样式
- 响应式设计优先移动端
```

#### 路径匹配语法

| 模式       | 说明                 | 示例                  |
| ---------- | -------------------- | --------------------- |
| `**`       | 匹配任意层级子目录   | `src/**/*.js`         |
| `*`        | 匹配单级目录或文件名 | `src/*.js`            |
| `{a,b}`    | 匹配多个扩展名       | `*.{js,ts,jsx,tsx}`   |
| `!pattern` | 排除匹配             | `src/**/*!(.test).js` |

#### 文件结构示例

```
your-project/
├── .github/
│   ├── copilot-instructions.md
│   └── instructions/
│       ├── frontend.instructions.md
│       ├── backend.instructions.md
│       └── docs.instructions.md
├── src/
└── server/
```

### 编写说明内容

#### 内容结构模板

```markdown
# 项目概述
简明扼要地描述项目目标、技术栈和主要功能

# 项目结构
- `/src`: 前端源代码
- `/server`: 后端 API 服务
- `/docs`: 项目文档

# 技术栈
- **前端**: React 18, TypeScript 5.0, Tailwind CSS
- **后端**: Node.js, Express, MongoDB
- **构建工具**: Vite, ESLint, Prettier

# 编码规范
- 使用 TypeScript 严格模式
- 函数命名使用 camelCase
- 常量使用 UPPER_SNAKE_CASE
- 每行代码不超过 100 字符

# 架构模式
- 采用模块化设计
- 遵循单一职责原则
- 使用依赖注入模式

# 特定术语
- **DataProcessor**: 数据处理核心模块
- **ConfigManager**: 配置管理器
- **ErrorCode**: 标准错误码枚举
```

---

## 高级功能

### 提示文件（Prompt Files）

提示文件是可复用的任务模板，适用于重复性工作。

#### 启用功能

在 VS Code 的 `settings.json` 中添加：

```json
{
  "chat.promptFiles": true
}
```

#### 创建提示文件

1. 创建 `.github/prompts` 文件夹
2. 创建模板文件，如 `generate-unit-tests.prompt.md`

#### 模板示例

```markdown
# 生成单元测试

为 #file: 中的代码生成全面的单元测试。

## 要求
- 使用 Jest 测试框架
- 覆盖正常输入、边界条件、异常情况
- 测试覆盖率达到 90% 以上
- 包含适当的 mock 和 spy

## 输出格式
- 测试文件命名为 `<原文件名>.test.js`
- 使用 describe-it 结构组织测试用例
- 每个测试用例要有清晰的描述
```

#### 使用方式

1. 在 Copilot Chat 中点击附加上下文图标（📎）
2. 选择 "Prompt..."
3. 选择对应的提示文件
4. 提供相关代码文件作为输入

---

## 验证与测试

### 验证配置生效

1. 打开 VS Code 中的 Copilot Chat
2. 询问关于项目的问题，如："帮我创建一个用户管理 API"
3. 查看回答下方的 **引用 (References)** 区域
4. 如果看到 `.github/copilot-instructions.md`，说明配置已生效

### 测试建议质量

```markdown
// 测试问题示例
1. "根据项目规范，创建一个新的数据处理模块"
2. "帮我重构这个函数，使其符合项目编码标准"
3. "为当前组件添加错误处理逻辑"
```

---

## 最佳实践

### ✅ 推荐做法

| 类别         | 建议                     | 示例                                        |
| ------------ | ------------------------ | ------------------------------------------- |
| **项目信息** | 提供清晰的项目背景和目标 | "这是一个 GPU 加速的雷达数据处理系统"       |
| **技术规范** | 明确技术栈和版本要求     | "使用 C++17 标准，CUDA 11.8+"               |
| **代码风格** | 详细说明命名和格式规范   | "类名使用 PascalCase，成员变量以下划线结尾" |
| **架构模式** | 描述设计模式和原则       | "所有模块继承 IModule 接口"                 |
| **错误处理** | 定义错误处理策略         | "使用 ErrorCode 枚举，避免异常抛出"         |

### ❌ 避免做法

| 问题         | 说明                 | 替代方案                       |
| ------------ | -------------------- | ------------------------------ |
| **外部引用** | 引用其他文件或链接   | 在说明中直接包含关键信息       |
| **角色扮演** | 要求特定回答风格     | 专注于技术指导而非交互风格     |
| **长度限制** | 限制回答长度或复杂度 | 让 AI 根据需要提供完整解决方案 |
| **过于详细** | 包含过多实现细节     | 提供高级指导原则即可           |

### 内容组织建议

1. **层次清晰**：使用标题和列表组织内容
2. **重点突出**：用粗体标记关键概念
3. **示例丰富**：提供具体的代码和配置示例
4. **定期更新**：随项目演进同步更新说明

---

## 功能对比

| 功能类型         | 文件位置                                 | 作用范围     | 适用场景             |
| ---------------- | ---------------------------------------- | ------------ | -------------------- |
| **全仓库说明**   | `.github/copilot-instructions.md`        | 整个项目     | 所有项目的基础配置   |
| **路径特定说明** | `.github/instructions/*.instructions.md` | 指定文件类型 | 大型项目的模块化配置 |
| **提示文件**     | `.github/prompts/*.prompt.md`            | 任务模板     | 重复性任务的自动化   |

### 使用建议

- **小型项目**：只需配置全仓库说明
- **中型项目**：添加 2-3 个路径特定说明
- **大型项目**：完整配置所有类型，包含提示文件
- **团队协作**：优先使用 Workspace 配置确保一致性

---

## 总结

通过合理配置 GitHub Copilot 自定义说明，可以显著提升 AI 辅助开发的效率和质量。建议从简单的全仓库说明开始，逐步添加更具体的配置，最终建立完整的 AI 辅助开发环境。

### 下一步行动

1. 创建基础的 `.github/copilot-instructions.md` 文件
2. 根据项目特点添加路径特定说明
3. 为常用任务创建提示文件模板
4. 定期评估和优化 AI 建议质量
