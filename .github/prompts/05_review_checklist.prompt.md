# 05_review_checklist.prompt.md
目的：快速粘贴到 Copilot Chat 或 PR 审查中作为审查项模板，支持 AI 自动逐项检查。

注：不要在此处重复仓库级约束，若需全局规则请引用 .github/copilot-instructions.md。

---

## Strong checks（强检查项 — 必查）

### 1. 接口合规性检查
- **IModule 继承**: 是否正确继承 `radar::common::IModule` 基接口
- **方法签名**: 是否与目标接口完全一致（参数类型、返回值、const 修饰符）
- **生命周期**: 是否实现了完整的 `initialize()`, `run()`, `stop()`, `cleanup()` 方法

### 2. 错误处理规范
- **ErrorCode 返回**: 所有可失败操作是否返回 `ErrorCode` 类型
- **异常安全**: 性能关键路径是否避免了异常抛出
- **错误码范围**: 模块错误码是否使用分配的范围（如 0x2000-DataProcessorErrors）

### 3. 数据类型合规
- **项目类型优先**: 是否使用 `AlignedComplexVector` 而非 `std::vector<ComplexFloat>`
- **GPU 优化类型**: 信号数据是否使用内存对齐的项目类型
- **类型一致性**: 输入输出类型是否与 `include/common/types.h` 定义一致

### 4. 性能关键路径检查
- **内存分配**: 处理循环中是否避免了动态内存分配
- **内存对齐**: GPU 相关数据是否满足对齐要求（16字节对齐）
- **批量操作**: 是否避免了逐元素 memcpy 操作

## Weak checks（推荐检查）

### 5. 编码规范合规
- **命名约定**: 类名 PascalCase，成员变量 `member_` 后缀，常量 `ALL_CAPS_UNDERSCORE`
- **命名空间**: 是否使用正确的 `radar::modules` 层级
- **Google C++ 风格**: 格式化是否符合项目 clang-format 配置

### 6. 文档和日志
- **Doxygen 注释**: 公共接口是否包含 `@brief`, `@param`, `@return` 注释
- **RADAR 日志**: 是否使用 `RADAR_INFO`, `RADAR_ERROR`, `RADAR_DEBUG` 宏
- **算法文档**: 复杂算法是否有必要的实现说明

### 7. 测试覆盖
- **单元测试**: 是否包含基本功能测试
- **边界测试**: 是否测试了空输入、最大数据量等边界条件
- **错误路径测试**: 是否测试了各种 ErrorCode 返回场景

### 8. 并发安全
- **线程安全声明**: 是否在接口注释中明确线程安全性
- **资源竞争**: 共享资源是否有适当的同步机制
- **GPU 内存管理**: CUDA 相关代码是否正确管理设备内存

---

## AI 快捷审查模板

### 快捷粘贴使用（Copilot Chat）
```
请按以下清单审查我粘贴的代码，并对每项给出 ✅Pass/❌Fail 与简短说明：

**强制检查项**：
1. 接口遵循（IModule继承、方法签名）
2. 错误处理（ErrorCode返回、无异常）
3. 数据类型（使用项目定义类型）
4. 性能关键路径（内存分配、对齐）

**推荐检查项**：
5. 命名和代码风格（Google C++风格）
6. 注释和日志（Doxygen、RADAR_*宏）
7. 线程安全（并发边界考虑）
8. 单元测试覆盖（或测试计划）

附上代码：[粘贴代码]
```

### 自动化检查命令
```bash
# 编译检查
cmake --build build --target [模块名] 2>&1 | tee build.log

# 格式化检查
clang-format --dry-run --Werror src/modules/[模块路径]/*.cpp include/modules/[模块路径]/*.h

# 静态分析
clang-tidy src/modules/[模块路径]/*.cpp -- -I include/ -I /usr/local/cuda/include

# 单元测试
ctest -R [模块名]Test --verbose
```

---


## Pull Request 信息

### 📋 变更类型
<!-- 请勾选适用的变更类型 -->
- [ ] ✨ 新功能 (feature)
- [ ] 🐛 Bug修复 (fix)
- [ ] 📚 文档更新 (docs)
- [ ] 🎨 代码格式化 (style)
- [ ] ♻️ 代码重构 (refactor)
- [ ] ⚡ 性能优化 (perf)
- [ ] ✅ 添加测试 (test)
- [ ] 🔧 构建工具或辅助工具变动 (chore)

### 📝 变更描述
<!-- 简要描述你在这个PR中做了什么 -->


### 🔗 关联Issue
<!-- 如果此PR解决了某个Issue，请在此引用，格式：Closes #123 -->


### 🧪 测试情况
<!-- 描述你如何测试了这些变更 -->
- [ ] 单元测试已通过
- [ ] 集成测试已通过
- [ ] 手动测试已完成
- [ ] 代码覆盖率未下降

### 📷 截图或演示
<!-- 如果适用，请添加截图或GIF来展示变更效果 -->


### 📋 审查清单
<!-- 提交PR前请确认以下项目 -->
- [ ] 代码遵循项目编码规范
- [ ] 代码已通过格式化检查 (clang-format)
- [ ] 代码已通过静态分析 (clang-tidy)
- [ ] 添加了必要的注释和文档
- [ ] 添加了相应的单元测试
- [ ] 所有测试都通过
- [ ] 没有引入新的编译警告
- [ ] 更新了相关文档（如有必要）

### ⚠️ 破坏性变更
<!-- 如果此PR包含破坏性变更，请详细描述 -->
- [ ] 此PR包含破坏性变更
- [ ] 已更新CHANGELOG
- [ ] 已通知相关团队成员

### 📋 部署注意事项
<!-- 如果有特殊的部署要求或注意事项，请在此说明 -->


### 👥 审查人员
<!-- @提及希望审查此PR的团队成员 -->


---
**感谢您的贡献！** 🎉
请确保CI检查通过，并获得至少一位团队成员的批准后再合并。
